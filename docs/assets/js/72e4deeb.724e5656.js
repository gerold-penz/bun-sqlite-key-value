"use strict";(self.webpackChunkbun_sqlite_key_value_docs=self.webpackChunkbun_sqlite_key_value_docs||[]).push([[3127],{7450:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"hash_map/write_value","title":"hSet() - Write Value","description":"First the","source":"@site/docs/120_hash_map/010_write_value.md","sourceDirName":"120_hash_map","slug":"/hash_map/write_value","permalink":"/bun-sqlite-key-value/hash_map/write_value","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Hash (JavaScript Map)","permalink":"/bun-sqlite-key-value/category/hash-javascript-map"},"next":{"title":"hGet() - Read Value","permalink":"/bun-sqlite-key-value/hash_map/read_value"}}');var s=a(4848),i=a(8453);const l={},r="hSet() - Write Value",o={},d=[{value:"key",id:"key",level:2},{value:"field",id:"field",level:2},{value:"value",id:"value",level:2},{value:"ttlMs (optional)",id:"ttlms-optional",level:2},{value:"Example",id:"example",level:2}];function c(e){const t={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"hset---write-value",children:"hSet() - Write Value"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"hSet(key: string, field: string, value: any, ttlMs?: number)\n"})}),"\n",(0,s.jsxs)(t.p,{children:["First the\n",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",children:"JavaScript Map Object"}),'\nis read from the database.\nIf the data record does not yet exist, a new "Map Object" is created.\nThen the entry marked with ',(0,s.jsx)(t.code,{children:"field"}),' is added to the "Map Object" or overwritten.\nFinally, the modified "Map Object" is written back to the database.']}),"\n",(0,s.jsxs)(t.p,{children:["Inspired by: ",(0,s.jsx)(t.a,{href:"https://docs.keydb.dev/docs/commands/#hset",children:"https://docs.keydb.dev/docs/commands/#hset"})]}),"\n",(0,s.jsxs)(t.blockquote,{children:["\n",(0,s.jsxs)(t.p,{children:["Do not use the hash functions with several very large amounts (megabytes) of data or blobs.\nThis is because the entire data record with all fields is always read and written.\nIt is better to use ",(0,s.jsx)(t.code,{children:"setValues()"})," and ",(0,s.jsx)(t.code,{children:"getValues()"})," for large amounts of data."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"key",children:"key"}),"\n",(0,s.jsx)(t.p,{children:"The key must be a string."}),"\n",(0,s.jsx)(t.h2,{id:"field",children:"field"}),"\n",(0,s.jsx)(t.p,{children:"The field name must be a string."}),"\n",(0,s.jsx)(t.h2,{id:"value",children:"value"}),"\n",(0,s.jsxs)(t.p,{children:["The value can be any object that can be serialized with\n",(0,s.jsx)(t.a,{href:"https://github.com/nodejs/node/blob/main/doc/api/v8.md#serialization-api",children:"v8"}),".\nThis means that not only simple data types (string, number) are possible,\nbut also more complex types such as sets or maps.\nYou can find a list of the\n",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm#supported_types",children:"supported data types"})," here."]}),"\n",(0,s.jsx)(t.h2,{id:"ttlms-optional",children:"ttlMs (optional)"}),"\n",(0,s.jsxs)(t.p,{children:['"Time to live" in milliseconds (for the database line, marked with ',(0,s.jsx)(t.code,{children:"key"}),").\nAfter this time, the item becomes invalid and is deleted from the database\nthe next time it is accessed or when the application is started.\nSet the value to 0 if you want to explicitly deactivate the process."]}),"\n",(0,s.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:'import { BunSqliteKeyValue } from "bun-sqlite-key-value"\n\nconst store = new BunSqliteKeyValue()\n\nstore.hSet("key-1", "field-1", "value-1")\nstore.hSet("key-1", "field-2", "value-2")\n\nstore.get("key-1") // --\x3e Map(2) {\n  "field-1": "value-1",\n  "field-2": "value-2",\n}\n'})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,t,a)=>{a.d(t,{R:()=>l,x:()=>r});var n=a(6540);const s={},i=n.createContext(s);function l(e){const t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);